# Comparing `tmp/odoo_addon_sale_invoice_policy-16.0.2.0.0.1-py3-none-any.whl.zip` & `tmp/odoo_addon_sale_invoice_policy-17.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 34318 bytes, number of entries: 27
--rw-r--r--  2.0 unx     3439 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/README.rst
--rw-r--r--  2.0 unx       21 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/__init__.py
--rw-r--r--  2.0 unx      606 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/__manifest__.py
--rw-r--r--  2.0 unx     3830 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/ca.po
--rw-r--r--  2.0 unx     3847 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/es.po
--rw-r--r--  2.0 unx     3899 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/es_MX.po
--rw-r--r--  2.0 unx     4098 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/fr.po
--rw-r--r--  2.0 unx     3848 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/it.po
--rw-r--r--  2.0 unx     3953 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/pt.po
--rw-r--r--  2.0 unx     2459 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/i18n/sale_invoice_policy.pot
--rw-r--r--  2.0 unx       89 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/models/__init__.py
--rw-r--r--  2.0 unx     1076 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/models/res_config_settings.py
--rw-r--r--  2.0 unx     1741 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/models/sale_order.py
--rw-r--r--  2.0 unx     4211 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/models/sale_order_line.py
--rw-r--r--  2.0 unx      319 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      139 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      214 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/static/description/icon.png
--rw-r--r--  2.0 unx    13454 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/static/description/index.html
--rw-r--r--  2.0 unx       39 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/tests/__init__.py
--rw-r--r--  2.0 unx     4879 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/tests/test_sale_invoice_policy.py
--rw-r--r--  2.0 unx     1237 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml
--rw-r--r--  2.0 unx      751 b- defN 24-May-03 05:40 odoo/addons/sale_invoice_policy/views/sale_view.xml
--rw-r--r--  2.0 unx     4028 b- defN 24-May-03 05:40 odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-03 05:40 odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-May-03 05:40 odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2893 b- defN 24-May-03 05:40 odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/RECORD
-27 files, 74622 bytes uncompressed, 29398 bytes compressed:  60.6%
+Zip file size: 34086 bytes, number of entries: 27
+-rw-r--r--  2.0 unx     3450 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/__init__.py
+-rw-r--r--  2.0 unx      606 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/__manifest__.py
+-rw-r--r--  2.0 unx     3830 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/ca.po
+-rw-r--r--  2.0 unx     3847 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/es.po
+-rw-r--r--  2.0 unx     3899 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/es_MX.po
+-rw-r--r--  2.0 unx     4098 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/fr.po
+-rw-r--r--  2.0 unx     3848 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/it.po
+-rw-r--r--  2.0 unx     3953 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/pt.po
+-rw-r--r--  2.0 unx     2317 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/i18n/sale_invoice_policy.pot
+-rw-r--r--  2.0 unx       89 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/models/__init__.py
+-rw-r--r--  2.0 unx     1077 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/models/res_config_settings.py
+-rw-r--r--  2.0 unx     1661 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/models/sale_order.py
+-rw-r--r--  2.0 unx     4232 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/models/sale_order_line.py
+-rw-r--r--  2.0 unx      347 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.md
+-rw-r--r--  2.0 unx      140 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/readme/DESCRIPTION.md
+-rw-r--r--  2.0 unx      214 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/readme/USAGE.md
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/static/description/icon.png
+-rw-r--r--  2.0 unx    13454 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/static/description/index.html
+-rw-r--r--  2.0 unx       39 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/tests/__init__.py
+-rw-r--r--  2.0 unx     4792 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/tests/test_sale_invoice_policy.py
+-rw-r--r--  2.0 unx      716 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml
+-rw-r--r--  2.0 unx      785 b- defN 24-May-18 19:21 odoo/addons/sale_invoice_policy/views/sale_view.xml
+-rw-r--r--  2.0 unx     4018 b- defN 24-May-18 19:21 odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       83 b- defN 24-May-18 19:21 odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        4 b- defN 24-May-18 19:21 odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2889 b- defN 24-May-18 19:21 odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/RECORD
+27 files, 73864 bytes uncompressed, 29172 bytes compressed:  60.5%
```

## zipnote {}

```diff
@@ -36,21 +36,21 @@
 
 Filename: odoo/addons/sale_invoice_policy/models/sale_order.py
 Comment: 
 
 Filename: odoo/addons/sale_invoice_policy/models/sale_order_line.py
 Comment: 
 
-Filename: odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.rst
+Filename: odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.md
 Comment: 
 
-Filename: odoo/addons/sale_invoice_policy/readme/DESCRIPTION.rst
+Filename: odoo/addons/sale_invoice_policy/readme/DESCRIPTION.md
 Comment: 
 
-Filename: odoo/addons/sale_invoice_policy/readme/USAGE.rst
+Filename: odoo/addons/sale_invoice_policy/readme/USAGE.md
 Comment: 
 
 Filename: odoo/addons/sale_invoice_policy/static/description/icon.png
 Comment: 
 
 Filename: odoo/addons/sale_invoice_policy/static/description/index.html
 Comment: 
@@ -63,20 +63,20 @@
 
 Filename: odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml
 Comment: 
 
 Filename: odoo/addons/sale_invoice_policy/views/sale_view.xml
 Comment: 
 
-Filename: odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/METADATA
+Filename: odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/WHEEL
+Filename: odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/top_level.txt
+Filename: odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/RECORD
+Filename: odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/sale_invoice_policy/README.rst

```diff
@@ -3,31 +3,31 @@
 ===================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:c97ec053f6a06fcb824861d16be9e31cc8a53549f47a0f38b6f54f534d09138b
+   !! source digest: sha256:e0e9ea9224547864b98ee1983ffb82d814ee04c29de1427ac5ddffc017d58c05
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy
+    :target: https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy
     :alt: OCA/sale-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_invoice_policy
+    :target: https://translation.odoo-community.org/projects/sale-workflow-17-0/sale-workflow-17-0-sale_invoice_policy
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
 This modules helps to get Invoicing Policy on Sale Order Level without
 breaking behaviour (as it is defined from >= v10 on product level).
 
@@ -35,57 +35,57 @@
 
 .. contents::
    :local:
 
 Usage
 =====
 
-* Create Sale Order
-* Select Invoicing Policy on Sale Order or let it void
-* Either the policy selected on Sale Order would be used, either if not
-  filled in, the policy would be chosen from product configuration
+-  Create Sale Order
+-  Select Invoicing Policy on Sale Order or let it void
+-  Either the policy selected on Sale Order would be used, either if not
+   filled in, the policy would be chosen from product configuration
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/sale-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * ACSONE SA/NV
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Cédric Pigeon <cedric.pigeon@acsone.eu>
-* François Honoré <francois.honore@acsone.eu>
-* Denis Roussel <denis.roussel@acsone.eu>
-* Alexei Rivera <arivera@archeti.com>
-* Luis J. Salvatierra <luis.salvatierra@factorlibre.com>
-* Alejandro Ji Cheung <alejandro.jicheung@factorlibre.com>
-* Ioan Galan <ioan@studio73.es>
+-  Cédric Pigeon <cedric.pigeon@acsone.eu>
+-  François Honoré <francois.honore@acsone.eu>
+-  Denis Roussel <denis.roussel@acsone.eu>
+-  Alexei Rivera <arivera@archeti.com>
+-  Luis J. Salvatierra <luis.salvatierra@factorlibre.com>
+-  Alejandro Ji Cheung <alejandro.jicheung@factorlibre.com>
+-  Ioan Galan <ioan@studio73.es>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy>`_ project on GitHub.
+This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/sale_invoice_policy/__manifest__.py

```diff
@@ -4,15 +4,15 @@
     "name": "Sale invoice Policy",
     "summary": """
         Sales Management: let the user choose the invoice policy on the
         order""",
     "author": "ACSONE SA/NV, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/sale-workflow",
     "category": "Sales Management",
-    "version": "16.0.2.0.0",
+    "version": "17.0.1.0.0",
     "license": "AGPL-3",
     "depends": ["sale_stock"],
     "data": [
         "views/res_config_settings_view.xml",
         "views/sale_view.xml",
     ],
 }
```

## odoo/addons/sale_invoice_policy/i18n/sale_invoice_policy.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* sale_invoice_policy
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 16.0\n"
+"Project-Id-Version: Odoo Server 17.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -47,19 +47,14 @@
 
 #. module: sale_invoice_policy
 #: model:ir.model.fields.selection,name:sale_invoice_policy.selection__sale_order__invoice_policy__order
 msgid "Ordered quantities"
 msgstr ""
 
 #. module: sale_invoice_policy
-#: model_terms:ir.ui.view,arch_db:sale_invoice_policy.view_sales_config
-msgid "Sale Invoice Policy"
-msgstr ""
-
-#. module: sale_invoice_policy
 #: model:ir.model.fields,field_description:sale_invoice_policy.field_res_config_settings__sale_invoice_policy_required
 msgid "Sale Invoice Policy Required"
 msgstr ""
 
 #. module: sale_invoice_policy
 #: model:ir.model,name:sale_invoice_policy.model_sale_order
 msgid "Sales Order"
```

## odoo/addons/sale_invoice_policy/models/res_config_settings.py

```diff
@@ -11,15 +11,15 @@
         help="This makes Invoice Policy required on Sale Orders"
     )
 
     @api.model
     def get_values(self):
         res = super().get_values()
         res.update(
-            sale_invoice_policy_required=self.env["ir.default"].get(
+            sale_invoice_policy_required=self.env["ir.default"]._get(
                 "res.config.settings", "sale_invoice_policy_required"
             )
         )
         return res
 
     def set_values(self):
         super().set_values()
```

## odoo/addons/sale_invoice_policy/models/sale_order.py

```diff
@@ -1,29 +1,27 @@
 # Copyright 2017 ACSONE SA/NV (<http://acsone.eu>)
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
 from odoo import api, fields, models
 
 
 class SaleOrder(models.Model):
-
     _inherit = "sale.order"
 
     invoice_policy = fields.Selection(
         [("order", "Ordered quantities"), ("delivery", "Delivered quantities")],
         readonly=True,
-        states={"draft": [("readonly", False)], "sent": [("readonly", False)]},
         help="Ordered Quantity: Invoice based on the quantity the customer "
         "ordered.\n"
         "Delivered Quantity: Invoiced based on the quantity the vendor "
         "delivered (time or deliveries).",
     )
     invoice_policy_required = fields.Boolean(
         compute="_compute_invoice_policy_required",
-        default=lambda self: self.env["ir.default"].get(
+        default=lambda self: self.env["ir.default"]._get(
             "res.config.settings", "sale_invoice_policy_required"
         ),
     )
 
     @api.model
     def default_get(self, fields_list):
         res = super().default_get(fields_list)
```

## odoo/addons/sale_invoice_policy/models/sale_order_line.py

```diff
@@ -12,34 +12,34 @@
         "qty_delivered",
         "product_uom_qty",
         "state",
         "order_id.invoice_policy",
     )
     def _compute_qty_to_invoice(self):
         other_lines = self.filtered(
-            lambda l: l.product_id.type == "service"
-            or not l.order_id.invoice_policy
-            or not l.order_id.invoice_policy_required
+            lambda line: line.product_id.type == "service"
+            or not line.order_id.invoice_policy
+            or not line.order_id.invoice_policy_required
         )
         super(SaleOrderLine, other_lines)._compute_qty_to_invoice()
         for line in self - other_lines:
             invoice_policy = line.order_id.invoice_policy
             if invoice_policy == "order":
                 line.qty_to_invoice = line.product_uom_qty - line.qty_invoiced
             else:
                 line.qty_to_invoice = line.qty_delivered - line.qty_invoiced
         return True
 
     @api.depends(
         "state",
-        "price_reduce",
         "product_id",
         "untaxed_amount_invoiced",
         "qty_delivered",
         "product_uom_qty",
+        "price_unit",
         "order_id.invoice_policy",
     )
     def _compute_untaxed_amount_to_invoice(self):
         other_lines = self.filtered(
             lambda line: line.product_id.type == "service"
             or not line.order_id.invoice_policy
             or line.order_id.invoice_policy == line.product_id.invoice_policy
@@ -63,15 +63,15 @@
                     price_reduce,
                     currency=line.currency_id,
                     quantity=uom_qty_to_consider,
                     product=line.product_id,
                     partner=line.order_id.partner_shipping_id,
                 )["total_excluded"]
             inv_lines = line._get_invoice_lines()
-            if any(inv_lines.mapped(lambda l: l.discount != line.discount)):
+            if any(inv_lines.mapped(lambda _l, sol=line: _l.discount != sol.discount)):
                 amount = 0
                 for inv_line in inv_lines:
                     if (
                         len(inv_line.tax_ids.filtered(lambda tax: tax.price_include))
                         > 0
                     ):
                         amount += inv_line.tax_ids.compute_all(
```

## odoo/addons/sale_invoice_policy/static/description/index.html

```diff
@@ -362,17 +362,17 @@
 <div class="document" id="sale-invoice-policy">
 <h1 class="title">Sale invoice Policy</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:c97ec053f6a06fcb824861d16be9e31cc8a53549f47a0f38b6f54f534d09138b
+!! source digest: sha256:e0e9ea9224547864b98ee1983ffb82d814ee04c29de1427ac5ddffc017d58c05
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
-<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy"><img alt="OCA/sale-workflow" src="https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_invoice_policy"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
+<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy"><img alt="OCA/sale-workflow" src="https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/sale-workflow-17-0/sale-workflow-17-0-sale_invoice_policy"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&amp;target_branch=17.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
 <p>This modules helps to get Invoicing Policy on Sale Order Level without
 breaking behaviour (as it is defined from &gt;= v10 on product level).</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
 <ul class="simple">
 <li><a class="reference internal" href="#usage" id="toc-entry-1">Usage</a></li>
 <li><a class="reference internal" href="#bug-tracker" id="toc-entry-2">Bug Tracker</a></li>
@@ -394,15 +394,15 @@
 </ul>
 </div>
 <div class="section" id="bug-tracker">
 <h1><a class="toc-backref" href="#toc-entry-2">Bug Tracker</a></h1>
 <p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/sale-workflow/issues">GitHub Issues</a>.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-<a class="reference external" href="https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
+<a class="reference external" href="https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
 <p>Do not contact contributors directly about support or help with technical issues.</p>
 </div>
 <div class="section" id="credits">
 <h1><a class="toc-backref" href="#toc-entry-3">Credits</a></h1>
 <div class="section" id="authors">
 <h2><a class="toc-backref" href="#toc-entry-4">Authors</a></h2>
 <ul class="simple">
@@ -424,14 +424,14 @@
 <div class="section" id="maintainers">
 <h2><a class="toc-backref" href="#toc-entry-6">Maintainers</a></h2>
 <p>This module is maintained by the OCA.</p>
 <a class="reference external image-reference" href="https://odoo-community.org"><img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" /></a>
 <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
-<p>This module is part of the <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy">OCA/sale-workflow</a> project on GitHub.</p>
+<p>This module is part of the <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy">OCA/sale-workflow</a> project on GitHub.</p>
 <p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>.</p>
 </div>
 </div>
 </div>
 </body>
 </html>
```

## odoo/addons/sale_invoice_policy/tests/test_sale_invoice_policy.py

```diff
@@ -89,16 +89,14 @@
         self.assertEqual(so_line.qty_to_invoice, 0)
         self.assertEqual(so_line.invoice_status, "no")
 
         so_line = so.order_line[1]
         self.assertEqual(so_line.qty_to_invoice, 0)
         self.assertEqual(so_line.invoice_status, "no")
 
-        for mv in picking.move_line_ids:
-            mv.qty_done = mv.reserved_uom_qty
         picking.button_validate()
         self.assertEqual(picking.state, "done")
 
         so_line = so.order_line[0]
         self.assertEqual(so_line.qty_to_invoice, 2)
         self.assertEqual(so_line.invoice_status, "to invoice")
```

## odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml

### odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml

```diff
@@ -1,21 +1,15 @@
 <?xml version="1.0" encoding="utf-8"?>
 <odoo>
   <record id="view_sales_config" model="ir.ui.view">
     <field name="name">sale settings</field>
     <field name="model">res.config.settings</field>
     <field name="inherit_id" ref="sale.res_config_settings_view_form"/>
     <field name="arch" type="xml">
-      <xpath expr="//div[@id='sales_settings_invoicing_policy']" position="after">
-        <div class="col-12 col-lg-6 o_setting_box" id="sale_invoice_policy_setting">
-          <div class="o_setting_left_pane">
-            <field name="sale_invoice_policy_required"/>
-          </div>
-          <div class="o_setting_right_pane">
-            <label string="Sale Invoice Policy" for="sale_invoice_policy_required"/>
-            <div class="text-muted" id="sale_invoice_policy_required">Invoice Policy required in Sale Orders</div>
-          </div>
-        </div>
-      </xpath>
+      <setting id="sales_settings_invoicing_policy" position="after">
+        <setting id="sale_invoice_policy_setting" help="Invoice Policy required in Sale Orders">
+          <field name="sale_invoice_policy_required"/>
+        </setting>
+      </setting>
     </field>
   </record>
 </odoo>
```

## odoo/addons/sale_invoice_policy/views/sale_view.xml

### odoo/addons/sale_invoice_policy/views/sale_view.xml

```diff
@@ -4,12 +4,12 @@
     <field name="name">sale.order.form (abi_sale_invoice_policy)</field>
     <field name="model">sale.order</field>
     <field name="inherit_id" ref="sale.view_order_form"/>
     <field name="priority">50</field>
     <field name="arch" type="xml">
       <field name="payment_term_id" position="after">
         <field name="invoice_policy_required" invisible="1"/>
-        <field name="invoice_policy" attrs="{'required': [('invoice_policy_required', '=', True)]}"/>
+        <field name="invoice_policy" required="invoice_policy_required" readonly="state not in ('draft', 'sent')"/>
       </field>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/METADATA` & `odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/METADATA`

 * *Files 12% similar despite different names*

```diff
@@ -1,49 +1,48 @@
 Metadata-Version: 2.1
-Name: odoo-addon-sale-invoice-policy
-Version: 16.0.2.0.0.1
+Name: odoo-addon-sale_invoice_policy
+Version: 17.0.1.0.0.2
+Requires-Python: >=3.10
+Requires-Dist: odoo>=17.0a,<17.1dev
 Summary: Sales Management: let the user choose the invoice policy on the order
 Home-page: https://github.com/OCA/sale-workflow
+License: AGPL-3
 Author: ACSONE SA/NV, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
-License: AGPL-3
-Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 16.0
+Classifier: Framework :: Odoo :: 17.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.10
-Requires-Dist: odoo <16.1dev,>=16.0a
 
 ===================
 Sale invoice Policy
 ===================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:c97ec053f6a06fcb824861d16be9e31cc8a53549f47a0f38b6f54f534d09138b
+   !! source digest: sha256:e0e9ea9224547864b98ee1983ffb82d814ee04c29de1427ac5ddffc017d58c05
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy
+    :target: https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy
     :alt: OCA/sale-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_invoice_policy
+    :target: https://translation.odoo-community.org/projects/sale-workflow-17-0/sale-workflow-17-0-sale_invoice_policy
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/sale-workflow&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
 This modules helps to get Invoicing Policy on Sale Order Level without
 breaking behaviour (as it is defined from >= v10 on product level).
 
@@ -51,59 +50,57 @@
 
 .. contents::
    :local:
 
 Usage
 =====
 
-* Create Sale Order
-* Select Invoicing Policy on Sale Order or let it void
-* Either the policy selected on Sale Order would be used, either if not
-  filled in, the policy would be chosen from product configuration
+-  Create Sale Order
+-  Select Invoicing Policy on Sale Order or let it void
+-  Either the policy selected on Sale Order would be used, either if not
+   filled in, the policy would be chosen from product configuration
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/sale-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_invoice_policy%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * ACSONE SA/NV
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Cédric Pigeon <cedric.pigeon@acsone.eu>
-* François Honoré <francois.honore@acsone.eu>
-* Denis Roussel <denis.roussel@acsone.eu>
-* Alexei Rivera <arivera@archeti.com>
-* Luis J. Salvatierra <luis.salvatierra@factorlibre.com>
-* Alejandro Ji Cheung <alejandro.jicheung@factorlibre.com>
-* Ioan Galan <ioan@studio73.es>
+-  Cédric Pigeon <cedric.pigeon@acsone.eu>
+-  François Honoré <francois.honore@acsone.eu>
+-  Denis Roussel <denis.roussel@acsone.eu>
+-  Alexei Rivera <arivera@archeti.com>
+-  Luis J. Salvatierra <luis.salvatierra@factorlibre.com>
+-  Alejandro Ji Cheung <alejandro.jicheung@factorlibre.com>
+-  Ioan Galan <ioan@studio73.es>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/16.0/sale_invoice_policy>`_ project on GitHub.
+This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/17.0/sale_invoice_policy>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
-
-
```

## Comparing `odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/RECORD` & `odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,27 +1,27 @@
-odoo/addons/sale_invoice_policy/README.rst,sha256=32y3s7Vn2rheigUoJQShPNIEWCZeWh8MFlWDelnS404,3439
+odoo/addons/sale_invoice_policy/README.rst,sha256=EsAxTWhz3gRo9p7u5J5XY6SgeTIQLnwmxbtOKN9wGq0,3450
 odoo/addons/sale_invoice_policy/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/sale_invoice_policy/__manifest__.py,sha256=lShoTZ7X1K3pKHFr_ZGApXf2fMD7ms0GtCxPJUXygbo,606
+odoo/addons/sale_invoice_policy/__manifest__.py,sha256=dPB2JKLwb62B6cFZN8EgCx9iKl_nJXAHYnmziK9wwFk,606
 odoo/addons/sale_invoice_policy/i18n/ca.po,sha256=CmAuN3x85GamN3ovpF7KI0lPnwGI9sbBqreE-qIMUKQ,3830
 odoo/addons/sale_invoice_policy/i18n/es.po,sha256=SfSD7GAOSsqrtZDOoDdrPyql5ZZrHvHnx0dKjqjQlhc,3847
 odoo/addons/sale_invoice_policy/i18n/es_MX.po,sha256=Y-VtePj92UAK85hG-O1_af-ehv6eCCA-jJLCuqpbkn4,3899
 odoo/addons/sale_invoice_policy/i18n/fr.po,sha256=OgOc0YmxXeRXAyk_owLS3ed8zbbewhDyWrXKRxmA4D8,4098
 odoo/addons/sale_invoice_policy/i18n/it.po,sha256=EQPyhoYceB0om3uczmk1DCt1SCE-KnZYqanLJv6WeYQ,3848
 odoo/addons/sale_invoice_policy/i18n/pt.po,sha256=-o3qkHHVeF9xxMG-tVUTRNVZMfFGfeixxDlXUSDgwmg,3953
-odoo/addons/sale_invoice_policy/i18n/sale_invoice_policy.pot,sha256=Iz3pvU9c8WsVHEMqrECuK9nAp8AgOkuMidmfMD_j6-4,2459
+odoo/addons/sale_invoice_policy/i18n/sale_invoice_policy.pot,sha256=MwLjLL9xvUyF_I43bNhNpetz9-CtLkGAxsvPtqcsSkc,2317
 odoo/addons/sale_invoice_policy/models/__init__.py,sha256=lbSpAvAWnoKHGcUH24rnf_VLPKjBzVYGNjLzA2Cx0xI,89
-odoo/addons/sale_invoice_policy/models/res_config_settings.py,sha256=0YhEukd-HaYmHkypF8C6kxYnxj6SQK8cxMhBvzlmHJ4,1076
-odoo/addons/sale_invoice_policy/models/sale_order.py,sha256=XtGh5NPer62a0rv6npBNYTGRiFKSBMi1PJcIaEpa1zE,1741
-odoo/addons/sale_invoice_policy/models/sale_order_line.py,sha256=nZWxERyTowBUwsTnn7gPSINA_e-FV_pz667HisLBdbs,4211
-odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.rst,sha256=Gy-iwkzRpIEkNOnHh_ohm2GTPLyyKTwt4g9P7BGhfIg,319
-odoo/addons/sale_invoice_policy/readme/DESCRIPTION.rst,sha256=dNACGO6qp8bjvk5CTHhkr7-2fP2aqw2XjZMftR3D4EE,139
-odoo/addons/sale_invoice_policy/readme/USAGE.rst,sha256=mHsdAfvy4OhM9Np3TIDLo77GsP7bQLH4KV1a_2_UJb4,214
+odoo/addons/sale_invoice_policy/models/res_config_settings.py,sha256=dYtuHqZmI0oWg8Tdx5KqwF1IzmWdgbh3l0bpuAq9poI,1077
+odoo/addons/sale_invoice_policy/models/sale_order.py,sha256=xVoVnPkWiUVEXW4gY41-hCBDSOCIQZUEr2cOuUN11x4,1661
+odoo/addons/sale_invoice_policy/models/sale_order_line.py,sha256=TWVNzl7gtPkcZNKJH6xwwxF68rxUgkxjk93yP1XSmHU,4232
+odoo/addons/sale_invoice_policy/readme/CONTRIBUTORS.md,sha256=gPxbRcdHBmoVfk-srtxPQ5Q2Uy16tuD9jVW5DtWNRHc,347
+odoo/addons/sale_invoice_policy/readme/DESCRIPTION.md,sha256=XEZ876xWWBpwWlggNYlPNI8umgAH0BrVya3m9bvbKt0,140
+odoo/addons/sale_invoice_policy/readme/USAGE.md,sha256=jm4YMfJfYeP_ZI7arR0-RLy5xN9X2YhKWQ_tlN7U1Kc,214
 odoo/addons/sale_invoice_policy/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/sale_invoice_policy/static/description/index.html,sha256=0A8bgTK4hn7qfjhHnzNG3TUCdvLLZ_EMxrW7SlX67Ao,13454
+odoo/addons/sale_invoice_policy/static/description/index.html,sha256=3CG-Indz7t_blmIKcgovTy5CpyvoI1FpZe-1N0YEo5s,13454
 odoo/addons/sale_invoice_policy/tests/__init__.py,sha256=PdSKR22uuGOojWtUCo6jEw3hSod2NJpdckan1CMTRdo,39
-odoo/addons/sale_invoice_policy/tests/test_sale_invoice_policy.py,sha256=W8IGZHa4XQ0hrk123CskT4uK7lZ13d-xZ572LWA9tes,4879
-odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml,sha256=J04nSKJ7RluTu6wAYN33MeEDIEBQuEDbhgeTYGyogKQ,1237
-odoo/addons/sale_invoice_policy/views/sale_view.xml,sha256=XQIC3kguSfre21OV9hDa7Mjj7jm6VstTy7RrV6EedVY,751
-odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/METADATA,sha256=Z1nQeWHTjFx8YCXZhB0BrtPmqugTXCog_ZKpK1IH_3Q,4028
-odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_sale_invoice_policy-16.0.2.0.0.1.dist-info/RECORD,,
+odoo/addons/sale_invoice_policy/tests/test_sale_invoice_policy.py,sha256=XY_5NJxxlbdqMq5sCsbYuBMWxXFltWHa3Ibd_9suwXE,4792
+odoo/addons/sale_invoice_policy/views/res_config_settings_view.xml,sha256=WFDvi77UvpUgiH6xmsqWZZvufJAzzBOUuiw1Mj_9ejI,716
+odoo/addons/sale_invoice_policy/views/sale_view.xml,sha256=sRG87JzWpg9_gZUjey6pgDZa4NU6WdsK6N6v-2EEBBE,785
+odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/METADATA,sha256=HGFYe4lpXgTIr0kShZJ3vm-4deUThD0tSFgIgYMyrt0,4018
+odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/WHEEL,sha256=8Rd4enx1PCuyDWP4SABqO5Fv8rpaknqp3VzjoFFLa6c,83
+odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/top_level.txt,sha256=QE6RBQ0QX5f4eFuUcGgU5Kbq1A_qJcDs-e_vpr6pmfU,4
+odoo_addon_sale_invoice_policy-17.0.1.0.0.2.dist-info/RECORD,,
```

